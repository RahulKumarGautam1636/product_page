<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;700&display=swap" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->
  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <title>Frontend Mentor | E-commerce product page</title>
  <!-- Feel free to remove these styles or customise in your own stylesheet ðŸ‘ -->
</head>
<body>
  <div class="nav_container">
      <div class="logo_container">
      <img onclick="toggleNav()" id="open_menu" src="images/icon-menu.svg" alt="menu">
      <img class="logo" src="images/logo.svg" alt="logo">
      </div>
      <div class="nav_wrapper">

      <div class="nav_links">
      <ul>
        <img id="close_menu" onclick="toggleNav()" src="images/icon-close.svg" alt="close">
        <li><a href="#">Collections</a></li>
        <li><a href="#">Men</a></li>
        <li><a href="#">Women</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </div>
  </div>
    <div class="cart_container">
      <img id="cartIcon" onclick="toggleCart()" src="images/icon-cart.svg" alt="cart">
      <img id="avatarImage" src="images/image-avatar.png" alt="profile_img">
    </div>
    <div class="cart">
      <h3>Cart</h3>
      <div id="cart_empty">
        <h4>Your cart is empty.</h4>
      </div>
      <div id="cart_wrapper">
    <div style="width: 100%" id="cart_list">
    </div>
      <button id="checkout_button" type="button" name="button">CHECKOUT</button>
    </div>
    </div>
  </div>
  <div class="product_container">

    <div onclick="toggleLightBox()" id="lightbox">
    <div class="image_container">
      <div  class="main_image">
      <div id="image_wrapper">
        <div onclick="slideRight(event)" class="arrows arrowLeft">
             <img src="images/icon-previous.svg" alt="arroRight"/>
        </div>
         <div id='imgWrap'>
           <div>
           <img class="productView" id="preview_Image" src="images/image-product-1.jpg" alt="product"/>
           </div>
           <div>
           <img class="productView" src="images/image-product-2.jpg" alt="product"/>
           </div>
           <div>
           <img class="productView" src="images/image-product-3.jpg" alt="product"/>
           </div>
           <div>
           <img class="productView" src="images/image-product-4.jpg" alt="product"/>
           </div>
         </div>
         <div onclick="slideLeft(event)" class="arrows">
             <img  src="images/icon-next.svg" alt="arroRight"/>
         </div>
      </div>
      </div>
      <div class="thumbnail_box">
        <img onclick="switchImage(event, 0)" src="images\image-product-1-thumbnail.jpg" alt="thumbnail">
        <img onclick="switchImage(event, 1)" src="images\image-product-2-thumbnail.jpg" alt="thumbnail">
        <img onclick="switchImage(event, 2)" src="images\image-product-3-thumbnail.jpg" alt="thumbnail">
        <img onclick="switchImage(event, 3)" src="images\image-product-4-thumbnail.jpg" alt="thumbnail">
      </div>
    </div>
  </div>
    <div id="details_box" class="details_container">
     <p>SNEAKER COMPANY</p>
     <h1>Fall Limited Edition Sneakers</h1>
     <p class="about">These low-profile sneakes are your prefect casual wear companion. Featuring a durable rubber outer sole. they'll withstand everything the weeather can offer.</p>
     <div class="price_box">
       <div>
         <h2>$125.00</h2>
         <div id="discount_box"><h4>50%</h4></div>
       </div>
       <p>$250.00</p>
     </div>
     <div class="counter_box">
       <div class="counter">
         <button onclick="itemCount(1)"><img src="images/icon-plus.svg" alt="add"></button>
         <p id="itemCount">1</p>
         <button onclick="itemCount(-1)"><img src="images/icon-minus.svg" alt="remove"></button>
       </div>
       <button onclick="renderCartItems(1)" class="addToCartButton" type="button" name="button">
         <svg width="22" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M20.925 3.641H3.863L3.61.816A.896.896 0 0 0 2.717 0H.897a.896.896 0 1 0 0 1.792h1l1.031 11.483c.073.828.52 1.726 1.291 2.336C2.83 17.385 4.099 20 6.359 20c1.875 0 3.197-1.87 2.554-3.642h4.905c-.642 1.77.677 3.642 2.555 3.642a2.72 2.72 0 0 0 2.717-2.717 2.72 2.72 0 0 0-2.717-2.717H6.365c-.681 0-1.274-.41-1.53-1.009l14.321-.842a.896.896 0 0 0 .817-.677l1.821-7.283a.897.897 0 0 0-.87-1.114ZM6.358 18.208a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm10.015 0a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm2.021-7.243-13.8.81-.57-6.341h15.753l-1.383 5.53Z" fill="#fff" fill-rule="nonzero"/></svg>
         Add To Cart
       </button>
     </div>
    </div>
  </div>
  <div class="attribution">
    <p>Challenge by - <span><a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.</span>
    Coded by - <span><a href="https://www.frontendmentor.io/profile/RahulKumarGautam1636">Rahul Kumar Gautam</a></span>.</p>
  </div>
<script>
  const nav_bar = document.querySelector('.nav_container .nav_links');
  const cart = document.querySelector('.cart');
  const cart_list = document.querySelector('#cart_list');
  const previewImage = document.querySelector('#preview_Image');
  const cartWrapper = document.querySelector('#cart_wrapper');
  const imgWrap = document.querySelector("#imgWrap");
  const lightbox = document.querySelector("#lightbox");
  let totalItem = 1;
  const items = [
    {
      id: 1,
      tag: 'Autumn Limited Edition',
      rate: 125.00,
      images: ['images/image-product-1.jpg', 'images/image-product-2.jpg', 'images/image-product-3.jpg', 'images/image-product-4.jpg'],
      thumbs: ['images/image-product-1-thumbnail.jpg', 'images/image-product-2-thumbnail.jpg', 'images/image-product-3-thumbnail.jpg', 'images/image-product-4-thumbnail.jpg'],
      quantity: 1
    }
  ]
  let cartItems = [
      {
        id: 2,
        tag: 'This is a sample product',
        rate: 101.55,
        images: ['images/image-product-1.jpg', 'images/image-product-2.jpg', 'images/image-product-3.jpg', 'images/image-product-4.jpg'],
        thumbs: ['images/image-product-2-thumbnail.jpg', 'images/image-product-2-thumbnail.jpg', 'images/image-product-3-thumbnail.jpg', 'images/image-product-4-thumbnail.jpg'],
        quantity: 2
      }
  ];

  const itemCount = (i) => {
    if (totalItem+i === 0) {
      return;
    }
    totalItem = totalItem + i;
    document.querySelector('#itemCount').innerText = totalItem;
  }

  const toggleNav = () => {
    nav_bar.classList.toggle('active');
  }
  const toggleCart = () => {
    cart.classList.toggle('active');
  }
  const renderCartItems = (id) => {
    if (checkDuplicate) {
      deleteItem(id);
    }
    const selectedItem = items.filter(i => i.id === id)[0];
    newItem(selectedItem.id, selectedItem.thumbs[0], selectedItem.tag, selectedItem.rate, totalItem);
    cartItems.push(selectedItem);
  }

  const newItem = (id, imgLink='1', tag='This is sample code', rate=100.50, quantity=totalItem) => {
    cartItem = document.createElement('div');
    cartItem.classList.add('cart_item');

    img = document.createElement('img');
    img.setAttribute('src', imgLink);
    cartItem.appendChild(img);

    itemDetails = document.createElement('div');
    itemDetails.classList.add('item_details');

    info = document.createElement('p');
    info.innerText = tag;
    itemDetails.appendChild(info);
    price = document.createElement('p');
    price.innerText = `${rate} x ${quantity}`;
    totalPrice = document.createElement('span');
    totalPrice.innerText = ` $${rate*quantity}`;
    price.appendChild(totalPrice);
    itemDetails.appendChild(price);
    cartItem.appendChild(itemDetails);

    delImg = document.createElement('img');
    delImg.setAttribute('src', 'images/icon-delete.svg');
    // delImg.onclick = function(id) {
    //   console.log(id);
    //   deleteItem(id);    // don't use this method it passes event instead of passing parameter id.
    // };
    delImg.addEventListener('click', function() {
      deleteItem(id)
    })

    cartItem.appendChild(delImg);
    cart_list.appendChild(cartItem);
  }
  const deleteItem = (id) => {
    while (cart_list.hasChildNodes()) {
      cart_list.removeChild(cart_list.firstChild);
    }
    console.log(id);
    cartItems = cartItems.filter(i => i.id !== id);1
    console.log(cartItems);
    cartItems.forEach(i => newItem(i.id, i.thumbs[0], i.tag, i.rate, i.quantity));
    if (cartItems.length === 0) {
      cartWrapper.classList.add('hide');
    } else if (cartItems.length === 1) {
      cartWrapper.classList.remove('hide');
    }
  }
  function renderCart() {
    cartItems.forEach(i => newItem(i.id, i.thumbs[0], i.tag, i.rate, i.totalItem));
  }
  renderCart();
  const checkDuplicate = (id) => {
    const duplicateItem = cartItems.filter(i => i.id === id );
    if (duplicateItem.length > 0) {
      return true;
    }
    return false;
  }
  let n = 0;
  let numberOfImages = 4;
  let translatePerClick = 100/numberOfImages;

  function slideLeft(event) {
    if (n <= 2) {
      n = n + 1;
      imgWrap.style.transform = `translateX(-${translatePerClick*n}%)`;
    }
    event.stopPropagation();
  }
  function slideRight() {
    if (n >= 1) {
      n = n-1;
      imgWrap.style.transform = `translateX(-${translatePerClick*n}%)`;
    }
    event.stopPropagation();
  }
  let c = document.querySelectorAll(".thumbnail_box img");
  c[0].classList.add('thumbActive');
  const switchImage = (event, img) => {
    imgWrap.style.transform = `translateX(-${translatePerClick*img}%)`;imgWrap.style.transform = `translateX(-${translatePerClick*img}%)`;
    c.forEach(i => i.classList.remove('thumbActive'));
    document.querySelector(".thumbnail_box").children[img].classList.add('thumbActive');
    event.stopPropagation();
  }
  const toggleLightBox = () => {
    lightbox.classList.toggle('lightbox_active');
  }
</script>
</body>
</html>


<!-- <div class="attribution">
  Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>.
  Coded by <a href="#">Your Name Here</a>.
</div> -->
